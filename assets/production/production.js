!function(t){"use strict";String.prototype.hashCode=function(){var t=0;if(0==this.length)return t;for(var e=0;e<this.length;e++){var i=this.charCodeAt(e);t=(t<<5)-t+i,t&=t}return t};var e={attach:function(e,i){this.header=t("header",e),this.headerScrollOffset=this.header.height()+2*i.theme.margin,this.scrollStickyStuff(e,i),this.contactForm(e,i),this.toolTips(e,i),this.projectList(e,i),this.comicPanels(e,i)},scrollMain:function(e,i){t("html, body").animate({scrollTop:i.theme.top},2*i.theme.animation.speed)},scrollStickyStuff:function(i,n){if("/"==n.page.url&&(t("p a[href*=#]",i).click(function(a){a.preventDefault(),n.theme.top=t(this.hash).offset().top-e.headerScrollOffset+1,e.scrollMain(i,n),document.location.hash=this.hash}),document.location.hash)){var a=t("p a[href="+document.location.hash+"]",i);a.length&&a.click()}t(window).scroll(function(){var i=t(window).scrollTop();i>e.header.outerHeight()?e.header.fadeIn(n.theme.animation.speed):1==e.header.css("opacity")&&e.header.fadeOut(n.theme.animation.speed)}),t("a.top",e.header).click(function(a){a.preventDefault(),n.theme.top=0,t("#modal, fieldset.contact, .messages, .tooltip .tip",i).fadeOut(n.theme.animation.speed),e.scrollMain(i,n)})},scrollFadeChildren:function(e,i){var n=t(window);if(!(n.width()<i.theme.breakpoints.md)){var a=function(){e.each(function(e,a){var o=t(a),r=o.offset().top+o.outerHeight()/3,h=n.scrollTop()+n.innerHeight();h>r?0==o.css("opacity")&&o.fadeTo(3*i.theme.animation.speed,1):1==o.css("opacity")&&o.fadeTo(i.theme.animation.speed,0)})};a(),n.scroll(function(){a()})}},toolTips:function(e,i){t(".tooltip",e).click(function(n){n.preventDefault();var a=t(this),o=a.attr("data-tip");if(o){var r=t(".tip",a);r.length||(r=t(document.createElement("div")).addClass("tip").html(o.replace(/\\n/g,"<br>")).hide(),a.append(r));var h=t(window).width()-a.offset().left,s=r.outerWidth()/2;h-r.outerWidth()>=r.outerWidth()?s=-r.outerWidth():h-r.outerWidth()<=0&&(s=Math.abs(h-r.outerWidth())+i.theme.margin),r.outerWidth()>=h&&r.css({marginLeft:-s+"px"}),t(".tip",e).not(r).hide(),r.toggle()}})},contactForm:function(i,n){var a=t("fieldset.contact",i);if(a.length){var o=t("a.form-toggler",i);o.click(function(e){e.preventDefault(),a.is(":visible")?a.slideUp(n.theme.animation.speed):(t(".messages",a).hide(),a.slideDown(n.theme.animation.speed))}),"#contact"===document.location.hash&&(a.hide(),o.first().click());var r=function(){function t(t,e){return Math.floor(Math.random()*(e-t+1))+t}a.find('input[type="text"], input[type="password"], input[type="file"], input[type="hidden"], input[type="email"], input[type="tel"], select, textarea').val("").find('input[type="radio"], input[type="checkbox"]').removeAttr("checked").removeAttr("selected");var e=t(0,10),i=t(0,10),n=parseInt(e+i).toString().hashCode(),o=a.find("input#human"),r=o.parent(".form-item");o.attr("placeholder","* Human check! What is "+e+" + "+i+"?"),r.find("input#human-valid").val(n),r.find("input#human-valid-input1").val(e),r.find("input#human-valid-input2").val(i)};r();var h=function(t,o){for(var h=a.find(".messages").removeClass("error success").hide(),s="<ul>",c=0;c<o.length;c++)o[c].length>0&&(s+="<li>"+o[c]+"</li>");s+="</li>",h.html(s).addClass(t?"success":"error").fadeIn(),n.theme.top=h.offset().top-e.headerScrollOffset,e.scrollMain(i,n),t&&r()},s=function(e,i){var n=new Array;a.find("input#human");if(t.each(t(".required",a),function(e,i){var a=t(i);a.val()||n.push(a.attr("data-msg"))}),1===i){var o=parseInt(e.human_valid_input1),r=parseInt(e.human_valid_input2),s=parseInt(o+r).toString(),c=s.hashCode().toString();(s!==e.human||c!==e.human_valid)&&n.push("Sorry"+(e.name.length?" "+e.name:"")+", you don't seem to have a human thing to discuss with us.")}return n.length&&h(!1,n),0===n.length};a.submit(function(e){e.preventDefault();var i=a.serializeArray().reduce(function(t,e){return t[e.name]=e.value.trim(),t},{}),o=s(i,0);return o&&(o=s(i,1)),o?void t.ajax(n.api.baseUri+"/contact",{method:"POST",contentType:"application/json",data:JSON.stringify(i),success:function(t){t=JSON.parse(t),h(!0,t.messages)},error:function(t){t=JSON.parse(t),h(!1,["Error occurred sending data to <i>"+n.api.baseUri+"</i>."])}}):!1})}},projectList:function(i,n){var a=t("#modal",i);if(t("ul.projects a",i).click(function(o){o.preventDefault();var r=t(this),h=n.projects[r.attr("data-project")],s=a.children(".modal");document.location.hash=this.hash,h.whiteLabel?document.title=n.page.title:document.title=h.name+" | "+n.site.title,s.find(".name").text(h.name).attr("href",h.url).show(),s.find(".name").parents("h3").attr("id","project-"+r.attr("data-project")),s.find(".client").text(h.client).attr("href",h.clientUrl).show(),s.find(".partner").toggle(h.client!==h.name),s.find(".description").html(h.description.replace(/\\n\\n/g,"</p><p>")),s.removeClass("white-label"),h.image?s.find("img").attr("src",0!==h.image.indexOf("http")?n.theme.images+"/projects/"+h.image:h.image).attr("alt",h.name):s.find("img").attr("src",""),h.whiteLabel?(s.find(".name, .client").hide(),s.find(".name-anon").text(h.name).show(),s.find(".client-anon").text(h.client).show(),s.find(".white-label-flag").show()):(s.find(".name-anon, .client-anon").text("").hide(),s.find(".white-label-flag").hide()),t(window).width()>n.theme.breakpoints.md&&s.height(s.hasClass("white-label")?"auto":a.parents(".stripe").height()-6*n.theme.margin),a.fadeIn(n.theme.animation.speed),n.theme.top=a.offset().top-e.headerScrollOffset,e.scrollMain(i,n)}),a.click(function(t){document.location.hash="projects",document.title=n.page.title,a.fadeOut(n.theme.animation.speed)}),document.location.hash){var o=t("ul.projects a[href="+document.location.hash+"]",i);o.length&&o.click()}},comicPanels:function(i,n){var a=t("ol.comic > li",i);a.length&&(a.each(function(e,i){var n=t(i),a=document.createElement("span");a.innerHTML=e+1,a.className="index",n.append(a)}),e.scrollFadeChildren(a,n))}},i=t("body");e.attach(i,settings)}(jQuery);